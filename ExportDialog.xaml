<Window x:Class="YoloAnnotator.ExportDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="导出数据集" Height="360" Width="520"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BackgroundBrush}"
        WindowStyle="None"
        ResizeMode="NoResize">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="32" ResizeBorderThickness="{x:Static SystemParameters.WindowResizeBorderThickness}" />
    </WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <!-- 自定义标题栏 -->
            <RowDefinition Height="*"/>
            <!-- 主内容区 -->
            <RowDefinition Height="Auto"/>
            <!-- 底部按钮区 -->
        </Grid.RowDefinitions>

        <!-- 自定义标题栏 -->
        <Border Grid.Row="0" Background="{StaticResource TitleBarBrush}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- 标题 -->
                <TextBlock Grid.Column="0" Text="导出数据集" FontWeight="SemiBold" FontSize="12"
                          VerticalAlignment="Center" Margin="12,0" Foreground="{StaticResource TextPrimaryBrush}">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsActive, RelativeSource={RelativeSource AncestorType=Window}}" Value="False">
                                    <Setter Property="Foreground" Value="#666666"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>

                <!-- 窗口控制按钮 -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button Name="BtnClose" Style="{StaticResource TitleBarCloseButtonStyle}" Click="BtnClose_Click">
                        <Path Data="M0,0 L12,12 M12,0 L0,12" Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" StrokeThickness="1.5"
                              Stretch="Uniform" Width="10" Height="10" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 主内容区 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <Grid Margin="24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- 标题 -->
                <TextBlock Grid.Row="0" Text="导出数据集" FontSize="16" FontWeight="SemiBold" 
                          Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,0,16"/>

                <!-- 导出格式 -->
                <TextBlock Grid.Row="1" Text="导出格式:" FontSize="12" 
                          Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,6"/>
                <ComboBox Name="CboFormat" Grid.Row="2" Height="28" FontSize="12" Margin="0,0,0,16">
                    <ComboBoxItem Content="YOLO (矩形框)" Tag="yolo" IsSelected="True"/>
                    <ComboBoxItem Content="OBB (旋转框)" Tag="obb" IsEnabled="True"/>
                    <ComboBoxItem Content="Seg (分割)" Tag="seg" IsEnabled="True"/>
                    <ComboBoxItem Content="Pose (姿态估计)" Tag="pose" IsEnabled="True"/>
                </ComboBox>

                <!-- 导出路径 -->
                <TextBlock Grid.Row="3" Text="导出路径:" FontSize="12" 
                          Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,6"/>
                <Grid Grid.Row="4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBox Name="TxtExportPath" Grid.Column="0" Height="28" 
                             FontSize="12" VerticalAlignment="Center" Text="C:\YOLO_Dataset"/>
                    <Button Grid.Column="1" Content="浏览" Width="70" Height="28" Margin="8,0,0,0"
                            Style="{StaticResource SecondaryButtonStyle}" Click="BtnBrowse_Click"/>
                </Grid>

                <!-- 统计信息 -->
                <TextBlock Grid.Row="5" Name="TxtStatistics" FontSize="11" 
                          Foreground="{StaticResource TextSecondaryBrush}" Margin="0,16,0,0" VerticalAlignment="Center" TextWrapping="Wrap"/>
            </Grid>
        </ScrollViewer>

        <!-- 底部按钮区 -->
        <Border Grid.Row="2" Background="{StaticResource SurfaceBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0">
            <StackPanel Margin="16,12" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Name="BtnCancel" Content="取消" Click="BtnCancel_Click" 
                        Style="{StaticResource SecondaryButtonStyle}" Width="80" Height="32" Margin="0,0,12,0"/>
                <Button Name="BtnExport" Content="导出" Click="BtnExport_Click" 
                        Style="{StaticResource PrimaryButtonStyle}" Width="80" Height="32"/>
            </StackPanel>
        </Border>

    </Grid>
</Window>